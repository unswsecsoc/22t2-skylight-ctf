#!/bin/sh

chmod 1773 /tmp /dev/shm /dev/mqueue /run/lock /var/tmp

cron

/etc/init.d/xinetd start

mkdir -p /var/run/sshd
eval "$(which sshd)"

chown -R tomcat:tomcat /usr/local/tomcat/webapps
runuser --login tomcat /usr/local/tomcat/bin/catalina.sh start
sleep 10
chown -R root:tomcat /usr/local/tomcat/webapps

# Prevent low priv users from reading the source code
find /usr/local/tomcat/webapps/ -type f -exec chmod 640 {} ';'

sleep infinity
